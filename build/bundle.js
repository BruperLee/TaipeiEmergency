!function(t){function e(o){if(n[o])return n[o].exports;var r=n[o]={exports:{},id:o,loaded:!1};return t[o].call(r.exports,r,r.exports,e),r.loaded=!0,r.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){t.exports=n(1)},function(t,e){"use strict";function n(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(){D=new google.maps.Map(document.querySelector(".map"),{center:{lat:25.050592,lng:121.539384},zoom:12})}function r(){0!==v.length&&(D=new google.maps.Map(document.querySelector(".map"),{center:{lat:parseFloat(v[0].Wgs84Y),lng:parseFloat(v[0].Wgs84X)},zoom:14}))}function i(){for(var t=0;t<v.length;t++){var e=v[t].CaseLocationDescription,n=v[t].PName,o=v[t].CaseID,r=new google.maps.Marker({position:{lat:parseFloat(v[t].Wgs84Y),lng:parseFloat(v[t].Wgs84X)},map:D,title:n,address:e,caseID:o});m.push(r),google.maps.event.addListener(r,"click",function(){f(this)})}}function a(){g.forEach(function(t){h.indexOf(t.CaseLocationDistrict)===-1&&h.push(t.CaseLocationDistrict)})}function s(){var t='\n        <option value="" disabled selected>-- 請選擇行政區 --</option>\n        <option value="全區">全區最新動態</option>\n    ';t=t.concat(h.map(function(t){return'<option value="'+t+'">'+t+"</option>"}).join("")),y.innerHTML=t}function c(){v="全區最新動態"===y.selectedOptions[0].text?g:g.filter(function(t){return t.CaseLocationDistrict===y.selectedOptions[0].text}),0!==v.length&&(r(),i(),u())}function u(){if(0!==v.length){var t=[];v.forEach(function(e){t.push('\n        <tr class="info-tr" caseID="'+e.CaseID+'">\n            <td>'+e.CaseTime+"</td>\n            <td>"+e.CaseLocationDistrict+"</td>\n            <td>"+e.CaseLocationDescription+"</td>\n            <td>"+e.CaseDescription+"</td>\n        </tr>\n        ")}),C.innerHTML=t.join("");var e=document.querySelectorAll(".info-tr");e.forEach(function(t){return t.addEventListener("click",l)})}}function l(t){var e=m.filter(function(e){return e.caseID===t.currentTarget.getAttribute("caseID")});f(e[0])}function f(t){L.setContent(d(t)),L.open(D,t)}function d(t){return'<ul id="'+t.caseID+'" style="list-style:none;">\n                <li>名稱: '+t.title+"</li>\n                <li>詳細位置: "+t.address+"</li>\n            </ul>\n            "}var p="https://tcgbusfs.blob.core.windows.net/blobfs/GetDisasterSummary.json",g=[],m=[],h=[],v=[],D=void 0,y=document.querySelector(".select-area"),C=document.querySelector(".tbody"),L=new google.maps.InfoWindow;fetch(p,{method:"GET"}).then(function(t){if(!t.ok)throw new Error(t.statusText);return t.json()}).then(function(t){var e=t.DataSet["diffgr:diffgram"].NewDataSet.CASE_SUMMARY;g.push.apply(g,n(e)),a(),s()}).catch(function(t){}),y.addEventListener("change",c),o()}]);
//# sourceMappingURL=bundle.js.map